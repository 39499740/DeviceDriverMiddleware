# 更新日志

## [1.2.0] - 2024-12-20

### 🎉 主要修复
- **✅ PDF打印功能完全修复** - 解决了Base64数据编码/解码问题
- **✅ 架构兼容性** - 完全支持32位和64位系统架构
- **✅ C# 5兼容性** - 兼容旧版编译器环境
- **✅ 依赖库集成** - 自动集成PdfiumViewer和native依赖库

### 📄 PDF打印改进
- 修复Base64JsonConverter实现，正确处理PDF数据转换
- 解决"试图加载格式不正确的程序"错误
- 自动下载并部署64位pdfium.dll（15.8MB）
- 支持同步和异步打印模式
- 实时进度监控和取消功能
- 完善的错误处理和异常消息

### 🔧 技术改进
- 将所有字符串插值`$"..."`替换为字符串连接以兼容C# 5
- 修复默认参数值从`default`改为`default(CancellationToken)`
- 将空条件运算符`?.Invoke`替换为显式null检查
- 解决Duplex命名空间冲突问题

### 📚 文档更新
- 完善SDK使用指南和API文档
- 添加故障排除部分，涵盖常见问题解决方案
- 更新示例文件，展示最新功能和修复
- 改进TypeScript定义文件，确保类型安全

### 🎨 示例改进
- 更新example.html，添加版本信息和功能状态显示
- 添加PDF打印功能修复的说明和提示
- 改进UI设计，提供更好的用户体验
- 添加详细的使用说明和操作指南

## [1.1.0] - 2024-11-15

### 🆕 新增功能
- 添加PDF打印功能基础实现
- 支持打印机列表获取和筛选
- 实现WebSocket实时通信
- 添加进度回调和事件监听

### 🐛 问题修复
- 修复连接稳定性问题
- 改进错误处理机制
- 优化内存使用

## [1.0.0] - 2024-10-01

### 🎉 首次发布
- 基本扫描仪功能实现
- WebSocket连接管理
- 图像扫描和参数配置
- TypeScript类型定义
- 基础文档和示例

---

## 支持信息

- **最低要求**: .NET Framework 4.5+, 现代浏览器
- **架构支持**: 32位和64位 Windows 系统
- **依赖库**: Newtonsoft.Json, websocket-sharp, NTwain, PdfiumViewer
- **测试环境**: Windows 10/11, Chrome/Edge/Firefox

## 已知问题

- ❌ 部分老旧扫描仪可能需要特定驱动版本
- ⚠️ 大尺寸PDF文件打印可能需要较长时间
- 💡 建议在生产环境中测试特定打印机兼容性

## 技术支持

如遇到问题，请：
1. 查看故障排除文档
2. 检查系统日志
3. 确认依赖库版本
4. 提交Issue并附带详细日志信息 